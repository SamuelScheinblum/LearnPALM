<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LearnPALM - Multilingual SAT Practice</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>

  <script>
    (function(){
      try{
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark')
        } else {
          document.documentElement.classList.remove('dark')
        }
      }catch(e){}
    })();
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VJE9RQF601"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-VJE9RQF601');
  </script>

  <link rel="stylesheet" href="/static/css/practice.css" />

  <style>
    :root {
      --accent: #16b729;
      --accent2: #f97316;
      --text: #111827;
      --muted: #6b7280;
      --bg: #ffffff;
    }
    :root.dark {
      --text: #f3f4f6;
      --muted: #d1d5db;
      --bg: #111827;
    }
    body {
      background: var(--bg);
      color: var(--text);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .hero { min-height: 100vh; display:flex; align-items:center; justify-content:center; text-align:center; padding: 40px 20px; }
    .hero-inner { max-width: 600px; }
    .hero-logo { width: clamp(120px, 20vw, 200px); height: auto; margin: 0 auto 20px; filter: drop-shadow(0 4px 12px rgba(249,115,22,.5)); transition: transform 0.3s ease, filter 0.3s ease; }
    .hero-logo:hover { transform: scale(1.05); filter: drop-shadow(0 6px 16px rgba(249,115,22,.7)); }
    .brand { display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 14px; color: var(--muted); margin-bottom: 16px; }
    .brand .dot { width: 8px; height: 8px; background: var(--accent2); border-radius: 50%; }
    .title { font-size: clamp(48px, 8vw, 72px); font-weight: 800; margin: 16px 0; background: linear-gradient(90deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .lede { font-size: 18px; color: var(--muted); margin: 16px 0 24px; }
    .tagline { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 24px; }
    .chip { display: inline-block; padding: 8px 16px; background: rgba(22,183,41,.1); border: 1px solid rgba(22,183,41,.3); border-radius: 20px; font-size: 14px; color: var(--text); transition: all 0.3s ease; }
    .chip:hover { background: rgba(22,183,41,.2); border-color: rgba(22,183,41,.5); }

    section { min-height: 60vh; display: flex; align-items: center; justify-content: center; padding: 60px 20px; background: var(--bg); }
    .panel { max-width: 1200px; width: 100%; text-align: center; }
    .panel h2 { font-size: clamp(32px, 5vw, 48px); font-weight: 700; margin-bottom: 16px; color: var(--text); text-align: center; }
    .panel > p { font-size: 18px; color: var(--muted); max-width: 500px; margin: 0 auto 32px auto; text-align: center; }
    .panel p { text-align: center; }

    .features { display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .card { padding: 24px; border: 1px solid #e5e7eb; border-radius: 12px; background: var(--bg); cursor: pointer; transition: all 0.3s ease; text-decoration: none; color: inherit; display: block; }
    .card:hover { border-color: var(--accent2); box-shadow: 0 8px 24px rgba(249,115,22,.15); transform: translateY(-4px); }
    .card h3 { font-size: 20px; font-weight: 600; margin: 0 0 8px 0; color: var(--text); }
    .card p { font-size: 14px; color: var(--muted); margin: 0; line-height: 1.6; }

    .chipbar { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }
    .mini { display: inline-block; padding: 4px 8px; background: rgba(22,183,41,.1); border-radius: 4px; font-size: 12px; color: var(--accent); font-weight: 500; }

    .bridge-toggle-container { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin: 32px auto; padding: 20px; background: linear-gradient(180deg, rgba(249,115,22,.08), rgba(16,185,129,.05)); border: 1px solid rgba(249,115,22,.3); border-radius: 16px; transition: all 0.3s ease; max-width: 600px; }
    .bridge-toggle-container.active { background: linear-gradient(180deg, rgba(16,185,129,.12), rgba(249,115,22,.08)); border-color: rgba(16,185,129,.4); }
    .bridge-toggle-info { flex: 1; text-align: left; }
    .bridge-toggle-info h4 { margin: 0 0 4px 0; font-size: 16px; color: var(--text); font-weight: 600; }
    .bridge-toggle-info p { margin: 0; font-size: 13px; color: var(--muted); line-height: 1.5; }
    .bridge-switch { position: relative; display: inline-block; width: 60px; height: 32px; flex-shrink: 0; }
    .bridge-switch input { opacity: 0; width: 0; height: 0; }
    .bridge-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #d1d5db; transition: .4s; border-radius: 32px; }
    .bridge-slider:before { position: absolute; content: ""; height: 24px; width: 24px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .bridge-slider { background: linear-gradient(90deg, var(--accent), var(--accent2)); }
    input:checked + .bridge-slider:before { transform: translateX(28px); }

    .start-practice-btn { margin-top: 32px; padding: 16px 32px; font-size: 18px; font-weight: 600; color: white; background: linear-gradient(90deg, var(--accent), var(--accent2)); border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 6px 24px rgba(16,185,129,.3); transition: transform 0.2s ease, box-shadow 0.2s ease; text-decoration: none; display: inline-block; }
    .start-practice-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(16,185,129,.4); }

    .back-to-top { position: fixed; bottom: 30px; right: 30px; z-index: 50; background: linear-gradient(90deg, var(--accent), var(--accent2)); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(249,115,22,.4); cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; border: none; opacity: 0; pointer-events: none; }
    .back-to-top.visible { opacity: 1; pointer-events: auto; }
    .back-to-top:hover { transform: translateY(-5px); box-shadow: 0 6px 30px rgba(249,115,22,.6); }
    .back-to-top svg { width: 24px; height: 24px; fill: currentColor; }

    .scroll-indicator .node[data-node="3"]{ display:none }
    .scroll-indicator .node[data-node="3"].visible{ display:block }
    #language .features { display:grid; gap:16px; grid-template-columns: repeat(2, minmax(0, 1fr)); margin-top:22px; }
    #language .features .language-card:nth-child(5){ grid-column:1 / -1; justify-self:center; width:calc(50% - 8px) }
    @media (max-width:800px){ #language .features{ grid-template-columns:1fr } #language .features .language-card:nth-child(5){ width:100% } }

    /* Settings menu */
    .settings-fab { position: fixed; top: 20px; right: 20px; z-index: 100; width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; border: none; cursor: pointer; box-shadow: 0 4px 20px rgba(249,115,22,.4); display: flex; align-items: center; justify-content: center; transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .settings-fab:hover { transform: scale(1.1); box-shadow: 0 6px 30px rgba(249,115,22,.6); }
    .settings-fab svg { width: 24px; height: 24px; }
    #settings-menu { position: fixed; top: 80px; right: 20px; z-index: 99; width: 320px; background: white; border: 1px solid #e5e7eb; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,.15); padding: 24px; }
    .dark #settings-menu { background: #1f2937; border-color: #374151; }
    .setting-row { display: flex; align-items: center; justify-content: space-between; padding: 16px 0; border-bottom: 1px solid #e5e7eb; }
    .dark .setting-row { border-color: #374151; }
    .setting-row:last-child { border-bottom: none; }
    .setting-info { flex: 1; }
    .setting-title { font-size: 14px; font-weight: 600; margin: 0 0 4px 0; color: var(--text); }
    .setting-desc { font-size: 12px; color: var(--muted); margin: 0; }
    .toggle-switch { position: relative; width: 48px; height: 26px; background: #d1d5db; border-radius: 13px; cursor: pointer; transition: background 0.3s; }
    .toggle-switch.on { background: linear-gradient(90deg, var(--accent), var(--accent2)); }
    .toggle-knob { position: absolute; top: 3px; left: 3px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: transform 0.3s; }
    .toggle-switch.on .toggle-knob { transform: translateX(22px); }
  </style>
</head>
<body class="bg-white dark:bg-gray-900">
  <div class="grid-bg" aria-hidden="true"></div>
  <div class="global-glow" aria-hidden="true"></div>

  <!-- SETTINGS FAB -->
  <button id="settings-btn" class="settings-fab" type="button" aria-label="Settings">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
    </svg>
  </button>

  <!-- SETTINGS MENU -->
  <div id="settings-menu" class="hidden">
    <h3 style="margin: 0 0 20px 0; font-size: 20px; font-weight: 700; color: var(--text);">Settings</h3>
    
    <div class="setting-row">
      <div class="setting-info">
        <div class="setting-title">Dark Mode</div>
        <div class="setting-desc" id="theme-status">Light theme active</div>
      </div>
      <div id="dark-toggle" class="toggle-switch" role="button" tabindex="0">
        <div class="toggle-knob"></div>
      </div>
    </div>

    <div class="setting-row">
      <div class="setting-info">
        <div class="setting-title">English Questions</div>
        <div class="setting-desc" id="english-status">Questions in selected language</div>
      </div>
      <div id="english-toggle" class="toggle-switch" role="button" tabindex="0">
        <div class="toggle-knob"></div>
      </div>
    </div>
  </div>

  <nav class="scroll-indicator" aria-label="Scroll sections">
    <span class="node" data-node="0" title="Welcome"></span>
    <span class="node" data-node="1" title="Choose Language"></span>
    <span class="node" data-node="2" title="Resources"></span>
    <span class="node" data-node="3" title="Bridge Mode"></span>
  </nav>

  <header class="hero" id="top">
    <div class="hero-inner">
      <img src="/static/img/LearnPALM Logo.png" alt="LearnPALM Logo" class="hero-logo">
      <div class="brand"><span class="dot"></span><span>Curated by 1580-1600 scorers</span></div>
      <h1 class="title">LearnPALM</h1>
      <p class="lede">Platform for Assessments, across Languages, Matrix</p>
      <p class="tagline">
        <span class="chip">Accurate <strong>SAT Questions</strong></span>
        <span class="chip">Practice in <strong>Your Language</strong></span>
        <span class="chip"><strong>Original</strong> Questions</span>
      </p>
    </div>
  </header>

  <section id="language">
    <div class="panel reveal">
      <h2>Choose Your Language</h2>
      <p>Select your preferred language to begin studying. All content will be available in your chosen language.</p>
      <div class="features">
        <a class="card reveal language-card" href="#resources" data-lang="en"><h3>üá∫üá∏ English</h3><p>Study SAT content in English</p></a>
        <a class="card reveal language-card" href="#resources" data-lang="es"><h3>üá™üá∏ Espa√±ol</h3><p>Estudia contenido SAT en espa√±ol</p></a>
        <a class="card reveal language-card" href="#resources" data-lang="pt"><h3>üáßüá∑ Portugu√™s</h3><p>Estude conte√∫do SAT em portugu√™s</p></a>
        <a class="card reveal language-card" href="#resources" data-lang="fr"><h3>üá´üá∑ Fran√ßais</h3><p>√âtudiez le contenu SAT en fran√ßais</p></a>
        <a class="card reveal language-card" href="#resources" data-lang="ht"><h3>üá≠üáπ Krey√≤l Ayisyen</h3><p>Etidye kontni SAT nan krey√≤l</p></a>
      </div>
    </div>
  </section>

  <section id="resources">
    <div class="panel reveal">
      <h2>Choose Your Study Mode</h2>
      <p id="resources-subtitle">Select the resource that matches your learning style.</p>
      <div class="features">
        <a class="card reveal resource-link" href="#bridge-mode" data-route="practice_home">
          <h3>‚úèÔ∏è Practice Questions</h3><p>Drill SAT problems in your preferred language.</p>
          <div class="chipbar"><span class="mini">Math</span><span class="mini">Reading</span><span class="mini">Writing</span></div>
        </a>
        <a class="card reveal resource-link" href="#" data-route="lessons">
          <h3>üìö Lessons</h3><p>Step-by-step SAT concept breakdowns with examples.</p>
          <div class="chipbar"><span class="mini">Concepts</span><span class="mini">Examples</span><span class="mini">Tips</span></div>
        </a>
        <a class="card reveal resource-link" href="#" data-route="glossary">
          <h3>üìñ Glossary</h3><p>Multilingual SAT vocabulary with definitions.</p>
          <div class="chipbar"><span class="mini">Searchable</span><span class="mini">Examples</span><span class="mini">Context</span></div>
        </a>
        <a class="card reveal resource-link" href="#" data-route="scholarships">
          <h3>üéì Scholarships</h3><p>Find merit scholarships for high SAT scorers.</p>
          <div class="chipbar"><span class="mini">Deadlines</span><span class="mini">Requirements</span><span class="mini">Links</span></div>
        </a>
      </div>
    </div>
  </section>

  <section id="bridge-mode" style="display: none;">
    <div class="panel reveal">
      <h2>Configure Your Practice</h2>
      <p>Choose how you want to experience SAT practice questions.</p>
      <div class="bridge-toggle-container" id="bridge-toggle-container">
        <div class="bridge-toggle-info">
          <h4 id="bridge-mode-title">üåç Native Mode</h4>
          <p id="bridge-mode-description">Questions and explanations in your selected language</p>
        </div>
        <label class="bridge-switch">
          <input type="checkbox" id="bridge-mode-toggle">
          <span class="bridge-slider"></span>
        </label>
      </div>
      <a href="#" id="start-practice-link" class="start-practice-btn">Start Practicing</a>
    </div>
  </section>

  <button class="back-to-top" id="backToTop" aria-label="Back to top">
    <svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
  </button>

  <script src="/static/js/practice.js"></script>

  <script>
    (function(){
      window.addEventListener('load', () => {
        window.scrollTo(0, 0);
        if (window.location.hash) history.replaceState(null, null, window.location.pathname);
      });

      let selectedLanguage = localStorage.getItem('selectedLanguage') || 'en';
      let selectedMode = null;
      const fourthIndicator = document.querySelector('.scroll-indicator .node[data-node="3"]');
      function toggleFourthIndicator(show){ if(fourthIndicator) fourthIndicator.classList.toggle('visible', show); }

      function updateSelectedLanguage(lang) {
        selectedLanguage = lang;
        localStorage.setItem('selectedLanguage', lang);
        document.querySelectorAll('.language-card').forEach(card => {
          const isSelected = card.getAttribute('data-lang') === lang;
          card.style.borderColor = isSelected ? '#f97316' : '';
          card.style.boxShadow = isSelected ? '0 0 0 2px #f97316' : '';
        });
        document.querySelectorAll('.resource-link').forEach(link => {
          const route = link.getAttribute('data-route');
          if (route === 'practice_home') link.href = '#bridge-mode';
          else if (route === 'glossary') link.href = '/templates/glossary.html';
          else if (route === 'lessons') link.href = '/templates/lessons.html';
          else if (route === 'scholarships') link.href = '/templates/scholarships.html';
        });
      }
      updateSelectedLanguage(selectedLanguage);

      document.querySelectorAll('.language-card').forEach(card => {
        card.addEventListener('click', function(e) {
          e.preventDefault();
          updateSelectedLanguage(this.getAttribute('data-lang'));
          document.getElementById('resources').scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      });

      document.querySelectorAll('.resource-link').forEach(link => {
        link.addEventListener('click', function(e) {
          const route = this.getAttribute('data-route');
          selectedMode = route;
          if (route === 'practice_home') {
            e.preventDefault();
            const bm = document.getElementById('bridge-mode');
            bm.style.display = 'block';
            toggleFourthIndicator(true);
            setTimeout(() => bm.scrollIntoView({ behavior: 'smooth', block: 'start' }), 50);
          } else {
            let path;
            if (route === 'glossary') path = '/templates/glossary.html';
            if (route === 'lessons') path = '/templates/lessons.html';
            if (route === 'scholarships') path = '/templates/scholarships.html';
            if (path) window.location.href = path;
          }
        });
      });

      const bridgeModeToggle = document.getElementById('bridge-mode-toggle');
      const bridgeModeTitle = document.getElementById('bridge-mode-title');
      const bridgeModeDescription = document.getElementById('bridge-mode-description');
      const bridgeToggleContainer = document.getElementById('bridge-toggle-container');

      function updateBridgeModeUI(isActive) {
        if (isActive) {
          bridgeModeTitle.textContent = 'üåâ Bridge Mode ON';
          bridgeModeDescription.textContent = 'Questions in English, explanations in your selected language';
          bridgeToggleContainer.classList.add('active');
        } else {
          bridgeModeTitle.textContent = 'üåç Native Mode';
          bridgeModeDescription.textContent = 'Questions and explanations in your selected language';
          bridgeToggleContainer.classList.remove('active');
        }
      }

      const savedBridgeMode = localStorage.getItem('englishQuestions') === 'true';
      if (bridgeModeToggle) {
        bridgeModeToggle.checked = savedBridgeMode;
        updateBridgeModeUI(savedBridgeMode);
        bridgeModeToggle.addEventListener('change', function() {
          if (this.checked) {
            localStorage.setItem('englishQuestions', 'true');
            updateBridgeModeUI(true);
          } else {
            localStorage.removeItem('englishQuestions');
            updateBridgeModeUI(false);
          }
        });
      }

      const startPracticeLink = document.getElementById('start-practice-link');
      if (startPracticeLink) {
        startPracticeLink.addEventListener('click', function(e) {
          e.preventDefault();
          window.location.href = '/templates/practice_home.html';
        });
      }

      const backToTopBtn = document.getElementById('backToTop');
      window.addEventListener('scroll', () => {
        backToTopBtn.classList.toggle('visible', window.scrollY > 500);
      });
      backToTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // SETTINGS MENU
      const settingsBtn = document.getElementById('settings-btn');
      const settingsMenu = document.getElementById('settings-menu');
      const darkToggle = document.getElementById('dark-toggle');
      const englishToggle = document.getElementById('english-toggle');
      const themeStatus = document.getElementById('theme-status');
      const englishStatus = document.getElementById('english-status');
      const html = document.documentElement;

      settingsBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        settingsMenu.classList.toggle('hidden');
      });

      document.addEventListener('click', (e) => {
        if (!settingsMenu.contains(e.target) && !settingsBtn.contains(e.target)) {
          settingsMenu.classList.add('hidden');
        }
      });

      function updateTheme() {
        const isDark = html.classList.contains('dark');
        themeStatus.textContent = isDark ? 'Dark theme active' : 'Light theme active';
        darkToggle.classList.toggle('on', isDark);
      }
      updateTheme();

      darkToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        const wasDark = html.classList.contains('dark');
        if (wasDark) {
          html.classList.remove('dark');
          localStorage.theme = 'light';
        } else {
          html.classList.add('dark');
          localStorage.theme = 'dark';
        }
        updateTheme();
      });

      function updateEnglish() {
        const isEnglish = localStorage.getItem('englishQuestions') === 'true';
        englishStatus.textContent = isEnglish ? 'Questions in English, explanations translated' : 'Questions in selected language';
        englishToggle.classList.toggle('on', isEnglish);
      }
      updateEnglish();

      englishToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        const wasEnglish = localStorage.getItem('englishQuestions') === 'true';
        if (wasEnglish) {
          localStorage.removeItem('englishQuestions');
        } else {
          localStorage.setItem('englishQuestions', 'true');
        }
        updateEnglish();
        if (typeof window.loadProblems === 'function') window.loadProblems();
      });
    })();
  </script>
</body>
</html>