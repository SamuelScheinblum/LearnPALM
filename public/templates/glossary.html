<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>LearnPALM - Glossary</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class'
    }
  </script>
  <script>
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }
  </script>
  <link rel="stylesheet" href="/static/css/styles.css">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VJE9RQF601"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VJE9RQF601');
  </script>
</head>
<body class="min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">
  
  <header class="sticky top-0 z-20 backdrop-blur bg-white/80 dark:bg-gray-900/80 border-b border-gray-200 dark:border-gray-700 transition-colors duration-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/" class="flex items-center gap-2">
        <img src="/static/img/LearnPALM Logo.png" alt="Logo" class="h-14 w-auto">
        <span class="font-semibold text-lg">LearnPALM</span>
      </a>
      
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="/templates/lessons.html" class="hover:underline dark:hover:text-blue-400 transition" data-i18n="nav.lessons">Lessons</a>
        <a href="/templates/practice_home.html" class="hover:underline dark:hover:text-blue-400 transition" data-i18n="nav.practice">Practice</a>
        <a href="/templates/scholarships.html" class="hover:underline dark:hover:text-blue-400 transition" data-i18n="nav.scholarships">Scholarships</a>
        <a href="/templates/glossary.html" class="hover:underline dark:hover:text-blue-400 transition" data-i18n="nav.glossary">Glossary</a>
        
        <div class="flex items-center gap-2 ml-2 pl-2 border-l border-gray-300 dark:border-gray-700">
          <span class="text-gray-600 dark:text-gray-400">üåê</span>
          <select id="select-language" class="rounded-md border border-gray-300 dark:border-gray-700 px-3 py-1.5 font-medium bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="ht">Krey√≤l</option>
            <option value="pt">Portugu√™s</option>
            <option value="fr">Fran√ßais</option>
          </select>
        </div>

        <div class="relative">
          <button id="settings-btn" type="button" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition" aria-label="Settings">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
          </button>

          <div id="settings-menu" class="hidden absolute top-12 right-0 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 z-50">
            <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100" data-i18n="settings.title">Settings</h3>
            
            <div class="flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700">
              <div class="flex items-center gap-3">
                <div class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg">
                  <svg class="w-5 h-5 text-gray-700 dark:text-yellow-400 transition-colors" fill="currentColor" viewBox="0 0 20 20">
                    <path class="hidden dark:block" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"></path>
                    <path class="block dark:hidden" d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                  </svg>
                </div>
                <div>
                  <div class="font-medium text-sm text-gray-900 dark:text-gray-100" data-i18n="settings.darkMode">Dark Mode</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400" id="theme-status">Light theme active</div>
                </div>
              </div>
              
              <button id="dark-toggle" type="button" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-gray-300 dark:bg-blue-600" role="switch">
                <span id="toggle-circle" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1 dark:translate-x-6"></span>
              </button>
            </div>

            <div class="py-3">
              <div class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2" data-i18n="settings.about">About</div>
              <a href="#" class="block py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition" data-i18n="settings.help">Help & Support</a>
              <a href="#" class="block py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition" data-i18n="settings.privacy">Privacy Policy</a>
            </div>
          </div>
        </div>
      </nav>
      
      <div class="md:hidden flex items-center gap-3">
        <span class="text-sm text-gray-600 dark:text-gray-400">üåê</span>
        <select id="select-language-moe" class="rounded-md border border-gray-300 dark:border-gray-700 px-2 py-1 text-sm font-medium bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
          <option value="en">EN</option>
          <option value="es">ES</option>
          <option value="ht">HT</option>
          <option value="pt">PT</option>
          <option value="fr">FR</option>
        </select>
        
        <button id="settings-btn-mobile" type="button" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <section class="max-w-6xl mx-auto px-4 py-10">
    <div class="mb-8">
      <h1 class="text-3xl font-bold mb-2" data-i18n="glossary.title">Multilingual SAT Glossary</h1>
      <p class="text-gray-600 dark:text-gray-400" data-i18n="glossary.subtitle">Essential SAT vocabulary in 5 languages</p>
    </div>

    <div class="mb-6">
      <input type="text" id="glossary-search" 
             placeholder="Search terms..." 
             class="w-full md:w-96 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
    </div>

    <div class="mb-10">
      <h2 class="text-2xl font-semibold mb-4 flex items-center gap-2">
        <span class="text-blue-600">üìê</span> <span data-i18n="glossary.mathTerms">Math Terms</span>
      </h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-3" id="math-terms">
        <!-- Math terms will be generated by JavaScript -->
      </div>
    </div>

    <div class="mb-10">
      <h2 class="text-2xl font-semibold mb-4 flex items-center gap-2">
        <span class="text-green-600">üìö</span> <span data-i18n="glossary.readingWriting">Reading & Writing Terms</span>
      </h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-3" id="reading-terms">
        <!-- Reading terms will be generated by JavaScript -->
      </div>
    </div>

    <div class="mb-10">
      <h2 class="text-2xl font-semibold mb-4 flex items-center gap-2">
        <span class="text-purple-600">‚úçÔ∏è</span> <span data-i18n="glossary.testTaking">Test-Taking Terms</span>
      </h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-3" id="test-terms">
        <!-- Test terms will be generated by JavaScript -->
      </div>
    </div>
  </section>

  <footer class="border-t border-gray-200 dark:border-gray-700 mt-16">
    <div class="max-w-6xl mx-auto px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400">
      ¬© 2025 LearnPALM
    </div>
  </footer>

  <script>
    // Translation dictionary for UI
    const translations = {
      en: {
        'nav.lessons': 'Lessons',
        'nav.practice': 'Practice',
        'nav.scholarships': 'Scholarships',
        'nav.glossary': 'Glossary',
        'settings.title': 'Settings',
        'settings.darkMode': 'Dark Mode',
        'settings.about': 'About',
        'settings.help': 'Help & Support',
        'settings.privacy': 'Privacy Policy',
        'glossary.title': 'Multilingual SAT Glossary',
        'glossary.subtitle': 'Essential SAT vocabulary in 5 languages',
        'glossary.searchPlaceholder': 'Search terms...',
        'glossary.mathTerms': 'Math Terms',
        'glossary.readingWriting': 'Reading & Writing Terms',
        'glossary.testTaking': 'Test-Taking Terms'
      },
      es: {
        'nav.lessons': 'Lecciones',
        'nav.practice': 'Pr√°ctica',
        'nav.scholarships': 'Becas',
        'nav.glossary': 'Glosario',
        'settings.title': 'Configuraci√≥n',
        'settings.darkMode': 'Modo Oscuro',
        'settings.about': 'Acerca de',
        'settings.help': 'Ayuda y Soporte',
        'settings.privacy': 'Pol√≠tica de Privacidad',
        'glossary.title': 'Glosario SAT Multiling√ºe',
        'glossary.subtitle': 'Vocabulario esencial del SAT en 5 idiomas',
        'glossary.searchPlaceholder': 'Buscar t√©rminos...',
        'glossary.mathTerms': 'T√©rminos de Matem√°ticas',
        'glossary.readingWriting': 'T√©rminos de Lectura y Escritura',
        'glossary.testTaking': 'T√©rminos del Examen'
      },
      ht: {
        'nav.lessons': 'Leson',
        'nav.practice': 'Pratik',
        'nav.scholarships': 'Bous',
        'nav.glossary': 'Glos√®',
        'settings.title': 'Param√®t',
        'settings.darkMode': 'M√≤d Nwa',
        'settings.about': 'Kons√®nan',
        'settings.help': '√àd ak Sip√≤',
        'settings.privacy': 'Politik sou Vi Prive',
        'glossary.title': 'Glos√® SAT Miltilengwal',
        'glossary.subtitle': 'Vokabil√® esansy√®l SAT nan 5 lang',
        'glossary.searchPlaceholder': 'Ch√®che t√®m...',
        'glossary.mathTerms': 'T√®m Matematik',
        'glossary.readingWriting': 'T√®m Lekti ak Ekriti',
        'glossary.testTaking': 'T√®m Egzamen'
      },
      pt: {
        'nav.lessons': 'Li√ß√µes',
        'nav.practice': 'Pr√°tica',
        'nav.scholarships': 'Bolsas',
        'nav.glossary': 'Gloss√°rio',
        'settings.title': 'Configura√ß√µes',
        'settings.darkMode': 'Modo Escuro',
        'settings.about': 'Sobre',
        'settings.help': 'Ajuda e Suporte',
        'settings.privacy': 'Pol√≠tica de Privacidade',
        'glossary.title': 'Gloss√°rio SAT Multil√≠ngue',
        'glossary.subtitle': 'Vocabul√°rio essencial do SAT em 5 idiomas',
        'glossary.searchPlaceholder': 'Pesquisar termos...',
        'glossary.mathTerms': 'Termos de Matem√°tica',
        'glossary.readingWriting': 'Termos de Leitura e Escrita',
        'glossary.testTaking': 'Termos de Exame'
      },
      fr: {
        'nav.lessons': 'Le√ßons',
        'nav.practice': 'Pratique',
        'nav.scholarships': 'Bourses',
        'nav.glossary': 'Glossaire',
        'settings.title': 'Param√®tres',
        'settings.darkMode': 'Mode Sombre',
        'settings.about': '√Ä propos',
        'settings.help': 'Aide et Support',
        'settings.privacy': 'Politique de Confidentialit√©',
        'glossary.title': 'Glossaire SAT Multilingue',
        'glossary.subtitle': 'Vocabulaire essentiel du SAT en 5 langues',
        'glossary.searchPlaceholder': 'Rechercher des termes...',
        'glossary.mathTerms': 'Termes de Math√©matiques',
        'glossary.readingWriting': 'Termes de Lecture et √âcriture',
        'glossary.testTaking': 'Termes d\'Examen'
      }
    };

    // Glossary terms data
    const glossaryData = {
      math: [
        { en: 'Variable', es: 'Variable', ht: 'Varyab', pt: 'Vari√°vel', fr: 'Variable' },
        { en: 'Equation', es: 'Ecuaci√≥n', ht: 'Ekwasyon', pt: 'Equa√ß√£o', fr: '√âquation' },
        { en: 'Coefficient', es: 'Coeficiente', ht: 'Kowefisyan', pt: 'Coeficiente', fr: 'Coefficient' },
        { en: 'Solution', es: 'Soluci√≥n', ht: 'Solisyon', pt: 'Solu√ß√£o', fr: 'Solution' },
        { en: 'Slope', es: 'Pendiente', ht: 'Pant', pt: 'Declive', fr: 'Pente' },
        { en: 'Intercept', es: 'Intersecci√≥n', ht: 'Ent√®seksyon', pt: 'Intercepto', fr: 'Ordonn√©e √† l\'origine' },
        { en: 'Exponent', es: 'Exponente', ht: 'Ekspozan', pt: 'Expoente', fr: 'Exposant' },
        { en: 'Square root', es: 'Ra√≠z cuadrada', ht: 'Rasin kare', pt: 'Raiz quadrada', fr: 'Racine carr√©e' },
        { en: 'Vertex', es: 'V√©rtice', ht: 'Som√®', pt: 'V√©rtice', fr: 'Sommet' },
        { en: 'Angle', es: '√Ångulo', ht: 'Ang', pt: '√Çngulo', fr: 'Angle' },
        { en: 'Perimeter', es: 'Per√≠metro', ht: 'Perim√®t', pt: 'Per√≠metro', fr: 'P√©rim√®tre' },
        { en: 'Area', es: '√Årea', ht: 'Sip√®fisi', pt: '√Årea', fr: 'Aire' },
        { en: 'Volume', es: 'Volumen', ht: 'Volim', pt: 'Volume', fr: 'Volume' },
        { en: 'Circle', es: 'C√≠rculo', ht: 'S√®k', pt: 'C√≠rculo', fr: 'Cercle' },
        { en: 'Radius', es: 'Radio', ht: 'Reyon', pt: 'Raio', fr: 'Rayon' },
        { en: 'Diameter', es: 'Di√°metro', ht: 'Dyam√®t', pt: 'Di√¢metro', fr: 'Diam√®tre' },
        { en: 'Mean (average)', es: 'Promedio', ht: 'Mway√®n', pt: 'M√©dia', fr: 'Moyenne' },
        { en: 'Median', es: 'Mediana', ht: 'Medyan', pt: 'Mediana', fr: 'M√©diane' },
        { en: 'Range', es: 'Rango', ht: 'Dom√®n', pt: 'Amplitude', fr: '√âtendue' },
        { en: 'Probability', es: 'Probabilidad', ht: 'Pwobablite', pt: 'Probabilidade', fr: 'Probabilit√©' },
        { en: 'Ratio', es: 'Raz√≥n', ht: 'Rap√≤', pt: 'Raz√£o', fr: 'Rapport' },
        { en: 'Percentage', es: 'Porcentaje', ht: 'Pousantaj', pt: 'Porcentagem', fr: 'Pourcentage' }
      ],
      reading: [
        { en: 'Main idea', es: 'Idea principal', ht: 'Lide prensipal', pt: 'Ideia principal', fr: 'Id√©e principale' },
        { en: 'Evidence', es: 'Evidencia', ht: 'Pr√®v', pt: 'Evid√™ncia', fr: 'Preuve' },
        { en: 'Inference', es: 'Inferencia', ht: 'Enferans', pt: 'Infer√™ncia', fr: 'Inf√©rence' },
        { en: 'Context', es: 'Contexto', ht: 'Kont√®ks', pt: 'Contexto', fr: 'Contexte' },
        { en: 'Transition', es: 'Transici√≥n', ht: 'Tranzisyon', pt: 'Transi√ß√£o', fr: 'Transition' },
        { en: 'Claim', es: 'Afirmaci√≥n', ht: 'Deklarasyon', pt: 'Afirma√ß√£o', fr: 'Affirmation' },
        { en: 'Conclusion', es: 'Conclusi√≥n', ht: 'Konklizyon', pt: 'Conclus√£o', fr: 'Conclusion' },
        { en: 'Paragraph', es: 'P√°rrafo', ht: 'Paragraf', pt: 'Par√°grafo', fr: 'Paragraphe' },
        { en: 'Sentence', es: 'Oraci√≥n', ht: 'Fraz', pt: 'Frase', fr: 'Phrase' },
        { en: 'Subject', es: 'Sujeto', ht: 'Sij√®', pt: 'Sujeito', fr: 'Sujet' },
        { en: 'Verb', es: 'Verbo', ht: 'V√®b', pt: 'Verbo', fr: 'Verbe' },
        { en: 'Comma', es: 'Coma', ht: 'Vigil', pt: 'V√≠rgula', fr: 'Virgule' }
      ],
      test: [
        { en: 'Answer choice', es: 'Opci√≥n de respuesta', ht: 'Chwa repons', pt: 'Op√ß√£o de resposta', fr: 'Choix de r√©ponse' },
        { en: 'Question', es: 'Pregunta', ht: 'Kesyon', pt: 'Pergunta', fr: 'Question' },
        { en: 'Section', es: 'Secci√≥n', ht: 'Seksyon', pt: 'Se√ß√£o', fr: 'Section' },
        { en: 'Calculator', es: 'Calculadora', ht: 'Kalkilatris', pt: 'Calculadora', fr: 'Calculatrice' },
        { en: 'Passage', es: 'Pasaje', ht: 'Pasaj', pt: 'Passagem', fr: 'Passage' },
        { en: 'Score', es: 'Puntuaci√≥n', ht: 'N√≤t', pt: 'Pontua√ß√£o', fr: 'Score' }
      ]
    };

    function translatePage(lang) {
      const dict = translations[lang] || translations.en;
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[key]) {
          el.textContent = dict[key];
        }
      });
      
      const searchInput = document.getElementById('glossary-search');
      if (searchInput && dict['glossary.searchPlaceholder']) {
        searchInput.placeholder = dict['glossary.searchPlaceholder'];
      }
    }

    function renderGlossary(lang) {
      const mathContainer = document.getElementById('math-terms');
      const readingContainer = document.getElementById('reading-terms');
      const testContainer = document.getElementById('test-terms');

      // Render math terms
      mathContainer.innerHTML = glossaryData.math.map(term => `
        <div class="glossary-card rounded-xl border border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800 hover:shadow-md transition" data-term="${Object.values(term).join(' ').toLowerCase()}">
          <div class="font-semibold text-sm text-blue-600 mb-1">EN: ${term.en}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">ES: ${term.es}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">HT: ${term.ht}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">PT: ${term.pt}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">FR: ${term.fr}</div>
        </div>
      `).join('');

      // Render reading terms
      readingContainer.innerHTML = glossaryData.reading.map(term => `
        <div class="glossary-card rounded-xl border border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800 hover:shadow-md transition" data-term="${Object.values(term).join(' ').toLowerCase()}">
          <div class="font-semibold text-sm text-green-600 mb-1">EN: ${term.en}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">ES: ${term.es}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">HT: ${term.ht}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">PT: ${term.pt}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">FR: ${term.fr}</div>
        </div>
      `).join('');

      // Render test terms
      testContainer.innerHTML = glossaryData.test.map(term => `
        <div class="glossary-card rounded-xl border border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800 hover:shadow-md transition" data-term="${Object.values(term).join(' ').toLowerCase()}">
          <div class="font-semibold text-sm text-purple-600 mb-1">EN: ${term.en}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">ES: ${term.es}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">HT: ${term.ht}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">PT: ${term.pt}</div>
          <div class="text-sm text-gray-700 dark:text-gray-300">FR: ${term.fr}</div>
        </div>
      `).join('');
    }

    // Search functionality
    document.getElementById('glossary-search').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const cards = document.querySelectorAll('.glossary-card');
      cards.forEach(card => {
        const termData = card.getAttribute('data-term');
        card.style.display = termData.includes(searchTerm) ? 'block' : 'none';
      });
    });

    // Get language from localStorage
    const currentLang = localStorage.getItem('selectedLanguage') || 'en';
    
    // Set language selectors
    const langSelect = document.getElementById('select-language');
    const langSelectMobile = document.getElementById('select-language-moe');
    if (langSelect) langSelect.value = currentLang;
    if (langSelectMobile) langSelectMobile.value = currentLang;
    
    // Translate page and render glossary
    translatePage(currentLang);
    renderGlossary(currentLang);
    
    // Language change handlers
    if (langSelect) {
      langSelect.addEventListener('change', function() {
        const newLang = this.value;
        localStorage.setItem('selectedLanguage', newLang);
        translatePage(newLang);
        renderGlossary(newLang);
      });
    }
    
    if (langSelectMobile) {
      langSelectMobile.addEventListener('change', function() {
        const newLang = this.value;
        localStorage.setItem('selectedLanguage', newLang);
        translatePage(newLang);
        renderGlossary(newLang);
      });
    }
  </script>

  <script src="/static/js/practice.js"></script>
  
  <!-- Settings menu script -->
  <script>
    (function(){
      const init = () => {
        const settingsBtn = document.getElementById('settings-btn');
        const settingsBtnMobile = document.getElementById('settings-btn-mobile');
        const settingsMenu = document.getElementById('settings-menu');
        const darkToggle = document.getElementById('dark-toggle');
        const themeStatus = document.getElementById('theme-status');
        const html = document.documentElement;

        function toggleSettings(e) {
          e.preventDefault();
          e.stopPropagation();
          if(settingsMenu) settingsMenu.classList.toggle('hidden');
        }

        if(settingsBtn) settingsBtn.addEventListener('click', toggleSettings);
        if(settingsBtnMobile) settingsBtnMobile.addEventListener('click', toggleSettings);

        document.addEventListener('click', (e) => {
          if (settingsMenu && !settingsMenu.contains(e.target) && 
              !settingsBtn?.contains(e.target) && 
              !settingsBtnMobile?.contains(e.target)) {
            settingsMenu.classList.add('hidden');
          }
        });

        function updateThemeStatus() {
          const isDark = html.classList.contains('dark');
          if (themeStatus) themeStatus.textContent = isDark ? 'Dark theme active' : 'Light theme active';
          if (darkToggle) darkToggle.setAttribute('aria-checked', String(isDark));
        }
        updateThemeStatus();

        if(darkToggle) {
          darkToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            const wasDark = html.classList.contains('dark');
            if (wasDark) {
              html.classList.remove('dark');
              localStorage.theme = 'light';
            } else {
              html.classList.add('dark');
              localStorage.theme = 'dark';
            }
            updateThemeStatus();
          });
        }
      };

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init, { once: true });
      } else {
        init();
      }
    })();
  </script>
</body>
</html>